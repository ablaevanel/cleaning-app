{"ast":null,"code":"var _jsxFileName = \"D:\\\\Dev\\\\cleaning-app\\\\frontend\\\\src\\\\pages\\\\Orders.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport api from '../api';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport '../styles/Orders.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Orders() {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchOrders = async () => {\n    try {\n      const res = await api.get('/orders');\n      setOrders(res.data || []);\n    } catch (err) {\n      console.error('Ошибка загрузки заказов:', err);\n      setError('Не удалось загрузить заказы');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n  const handleDelete = async orderId => {\n    if (!window.confirm('Вы уверены, что хотите удалить эту заявку?')) {\n      return;\n    }\n    try {\n      await api.delete(`/orders/${orderId}`);\n      // Обновляем список после удаления\n      fetchOrders();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Ошибка удаления заказа:', err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Не удалось удалить заказ');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"orders-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041C\\u043E\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this) : orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"orders-list\",\n        children: orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"order-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0423\\u0441\\u043B\\u0443\\u0433\\u0430:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 33\n          }, this), \" \", order.service, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 73\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this), \" \", order.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 72\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 33\n          }, this), \" \", new Date(order.created_at).toLocaleString(), order.status === 'created' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(order.id),\n            className: \"delete-btn\",\n            children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 37\n          }, this)]\n        }, order.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(Orders, \"x7inJL1bZn9UiZl0R10q/W4YjHI=\");\n_c = Orders;\nvar _c;\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"names":["useEffect","useState","api","Header","Footer","jsxDEV","_jsxDEV","Fragment","_Fragment","Orders","_s","orders","setOrders","loading","setLoading","error","setError","fetchOrders","res","get","data","err","console","handleDelete","orderId","window","confirm","delete","_err$response","_err$response$data","alert","response","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","order","service","status","Date","created_at","toLocaleString","onClick","id","_c","$RefreshReg$"],"sources":["D:/Dev/cleaning-app/frontend/src/pages/Orders.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport api from '../api';\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport '../styles/Orders.css';\r\n\r\nexport default function Orders() {\r\n    const [orders, setOrders] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    const fetchOrders = async () => {\r\n        try {\r\n            const res = await api.get('/orders');\r\n            setOrders(res.data || []);\r\n        } catch (err) {\r\n            console.error('Ошибка загрузки заказов:', err);\r\n            setError('Не удалось загрузить заказы');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchOrders();\r\n    }, []);\r\n\r\n    const handleDelete = async (orderId) => {\r\n        if (!window.confirm('Вы уверены, что хотите удалить эту заявку?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await api.delete(`/orders/${orderId}`);\r\n            // Обновляем список после удаления\r\n            fetchOrders();\r\n        } catch (err) {\r\n            console.error('Ошибка удаления заказа:', err);\r\n            alert(err.response?.data?.error || 'Не удалось удалить заказ');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <main className=\"orders-container\">\r\n                <h2>Мои заявки</h2>\r\n                {loading ? (\r\n                    <p>Загрузка...</p>\r\n                ) : error ? (\r\n                    <p className=\"error\">{error}</p>\r\n                ) : orders.length === 0 ? (\r\n                    <p>У вас пока нет заявок.</p>\r\n                ) : (\r\n                    <ul className=\"orders-list\">\r\n                        {orders.map(order => (\r\n                            <li key={order.id} className=\"order-item\">\r\n                                <strong>Услуга:</strong> {order.service}<br />\r\n                                <strong>Статус:</strong> {order.status}<br />\r\n                                <strong>Дата создания:</strong> {new Date(order.created_at).toLocaleString()}\r\n                                {order.status === 'created' && (\r\n                                    <button \r\n                                        onClick={() => handleDelete(order.id)}\r\n                                        className=\"delete-btn\"\r\n                                    >\r\n                                        Удалить\r\n                                    </button>\r\n                                )}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n            </main>\r\n            <Footer />\r\n        </>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}